{"version":3,"file":"static/js/537.c05c902b.chunk.js","mappings":"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","sources":["api/hospitalSet/index.tsx","pages/hospital/hospitalSet/index.tsx"],"sourcesContent":["import {request} from '@utils/http'\r\nimport { Key } from 'react'\r\nimport {IhospitalSetRes,hospitalAdd,IhosoitalItem} from './model/hospitalSetTypes'\r\n// 获取分页数据\r\nexport function getReqHospitalSet(page:number,limit:number,hosname?:string,hoscode?:string){\r\n    return request.get<any,IhospitalSetRes>(`/admin/hosp/hospitalSet/${page}/${limit}`,{\r\n        params:{\r\n            hosname,\r\n            hoscode\r\n        }\r\n    })\r\n}\r\n// 添加表格数据\r\nexport function postReqHospitalSetAdd(data:hospitalAdd){\r\n    // 第二个null是返回值类型，这里我们不在意返回值所以null\r\n    return request.post<any,null>(`/admin/hosp/hospitalSet/save`,data)\r\n}\r\n// 请求修改表格数据\r\nexport function getReqOneHospitalSet(id:string){\r\n    return request.get<any,IhosoitalItem>(`/admin/hosp/hospitalSet/get/${id}`)\r\n}\r\n// 返回修改表格数据\r\nexport function getReqUpdateHospitalSet(data:IhosoitalItem){\r\n    // 第二个null是返回值类型，这里我们不在意返回值所以null\r\n    return request.put<any,null>(`/admin/hosp/hospitalSet/update`,data)\r\n}\r\n// 删除表格的一条数据\r\nexport function getReqDeleteHospitalSet(id:string){\r\n    // 第二个null是返回值类型，这里我们不在意返回值所以null\r\n    return request.delete<any,null>(`/admin/hosp/hospitalSet/remove/${id}`)\r\n}\r\n// 删除表格的多条数据\r\nexport function getReqBatchHospitalSet(ids:Key[]){\r\n    // 第二个null是返回值类型，这里我们不在意返回值所以null\r\n    return request.delete<any,null>(`/admin/hosp/hospitalSet/batchRemove`,{\r\n        data:ids\r\n    })\r\n}","import React,{useEffect,useState,Key} from 'react'\r\nimport { Button, Form, Input,Card,Space,Table,Modal, message} from 'antd';\r\nimport { SearchOutlined,EditOutlined,DeleteOutlined,ExclamationCircleOutlined} from '@ant-design/icons';\r\nimport type { ColumnsType } from 'antd/es/table';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {IhospitalList,IhosoitalItem} from '../../../api/hospitalSet/model/hospitalSetTypes'\r\nimport {getReqHospitalSet,getReqDeleteHospitalSet,getReqBatchHospitalSet} from '../../../api/hospitalSet'\r\nlet flag=false\r\nexport default function HospitalSet() {\r\n  // 发送请求从服务器获取到的数据\r\n  const [list,setList]=useState<IhospitalList>([])\r\n  // 当前服务器总的数据条数\r\n  const [total,setTotal]=useState(0)\r\n  // 动态获取每页条数\r\n  const [pageSize,setpageSize]=useState(2)\r\n  // 动态获取批量删除的id列表\r\n  const [ids,setIds]=useState<Key[]>([])\r\n  const [loading,setLoading]=useState(false)\r\n  // form相当于formdata，与Form表单的form属性绑定，获取表单的数据\r\n  const [form]=Form.useForm()\r\n  // 动态获取第几页\r\n  const [page,setPage]=useState(1)\r\n  const navigate=useNavigate()\r\n  useEffect(()=>{\r\n    // 组件挂载的时候请求数据\r\n   fetch(1,pageSize)\r\n  },[])\r\n  // 数据查询\r\n  async function fetch(page:number,pageSize:number){\r\n    setLoading(true)\r\n    const {hosname,hoscode}=form.getFieldsValue()\r\n    let result\r\n    if(flag){\r\n      result=await getReqHospitalSet(page,pageSize,hosname,hoscode)\r\n    }else{\r\n      result=await getReqHospitalSet(page,pageSize)\r\n    }\r\n    setList(result.records)\r\n    setTotal(result.total)\r\n    setLoading(false)\r\n   }\r\n const onFinish=()=>{\r\n  flag = true\r\n  setPage(1)\r\n  fetch(1, pageSize)\r\n }\r\n//  清空查询\r\n const clearList=()=>{\r\n  form.setFieldsValue({hosname:undefined,hoscode:undefined})\r\n  fetch(1,pageSize)\r\n  flag=false\r\n  setPage(1)\r\n }\r\n//  删除表格的一条数据\r\n const delHospital=(id:string)=>{\r\n  return ()=>{\r\n    getReqDeleteHospitalSet(id)\r\n    fetch(page,pageSize)\r\n  }\r\n }\r\n const columns: ColumnsType<IhosoitalItem> = [\r\n  {\r\n    title: '序号',\r\n    render:(_,loacd,index)=>(<a>{index+1}</a>),\r\n    width:100,\r\n    align:'center'\r\n  },\r\n  \r\n  {\r\n    title: '医院名称',\r\n    // key: 'age',\r\n     dataIndex: 'hosname',\r\n  },\r\n  {\r\n    title: '医院编号',\r\n    dataIndex: 'hoscode',\r\n  },\r\n  {\r\n    title: 'api基础路径',\r\n    // key: 'tags',\r\n    dataIndex: 'apiUrl',\r\n  },\r\n  {\r\n    title: '签名',\r\n    dataIndex:'signKey'\r\n  },\r\n  {\r\n    title: '联系人姓名',\r\n    dataIndex:'contactsName'\r\n  },\r\n  {\r\n    title: '联系人手机',\r\n    dataIndex:'contactsPhone',\r\n  },\r\n  {\r\n    title: '操作',\r\n    render:(_)=>{\r\n      return(<Space size={'small'}>\r\n        <Button type='primary' icon={<EditOutlined />} onClick={()=>{\r\n          navigate(`/syt/hospital/hospitalSet/edit/${_.id}`)\r\n        }}></Button>\r\n        <Button type='primary' icon={<DeleteOutlined />} danger onClick={delHospital(_.id)}></Button>\r\n      </Space>)\r\n    },\r\n    fixed:'right',\r\n    width:120\r\n  },\r\n];\r\n  return (\r\n     <Card>\r\n     <Form layout='inline' onFinish={onFinish} form={form} onValuesChange={()=>{\r\n      flag=false\r\n     }}>\r\n        <Form.Item name='hosname'>\r\n          <Input placeholder='医院名称'></Input>\r\n        </Form.Item>\r\n        <Form.Item name='hoscode'>\r\n          <Input placeholder='医院编号'></Input>\r\n        </Form.Item>\r\n        <Form.Item>\r\n       <Space size={'small'}> \r\n        <Button type=\"primary\" icon={<SearchOutlined />} htmlType='submit' >查询</Button>\r\n        <Button onClick={clearList}>清空</Button></Space>\r\n        </Form.Item>\r\n      </Form>\r\n      <Space size={'small'} className='gay'> \r\n        <Button type=\"primary\" onClick={()=>{\r\n          navigate('/syt/hospital/hospitalSet/add')\r\n        }}>添加</Button>\r\n        <Button type=\"primary\" danger disabled={!ids.length} onClick={()=>{\r\n          Modal.confirm({\r\n            title: '您确认要删除这些数据吗?',\r\n            icon: <ExclamationCircleOutlined />,\r\n            // content: 'Some descriptions',\r\n            onOk() {\r\n              getReqBatchHospitalSet(ids)\r\n              setIds([])//清空数组，让批量删除按钮禁用\r\n              fetch(page,pageSize)\r\n              message.success('数据删除成功')\r\n            },\r\n            // 取消的回调\r\n            // onCancel() {\r\n            //   console.log('Cancel');\r\n            // },\r\n          });\r\n        }}>批量删除</Button></Space>\r\n        <Table className='gay'\r\n         loading={loading} \r\n         columns={columns} \r\n         dataSource={list} \r\n         scroll={{x:1500}}\r\n          rowSelection={{\r\n            onChange(selectedRowKeys, selectedRows){\r\n              // selectedRowKeys:是选中的id列表,selectedRows:是选中的数据列表\r\n              setIds(selectedRowKeys)\r\n            }\r\n          }} \r\n          bordered \r\n          pagination={{total,showSizeChanger:true,pageSize,showQuickJumper:true,pageSizeOptions:[2,5,10],showTotal:(total)=>{return `总共${total}条`},current:page,\r\n          onChange:(page,pageSize)=>{setpageSize(pageSize)\r\n            setPage(page)\r\n            // page是页数,pageSize是每页条数，点击设置页数和每页条数的时候，设置一个状态，动态设置每页条数，更新条数，onChange触发时，发送请求，拿到最新数据，重新渲染页面\r\n          fetch(page,pageSize)}}} \r\n        rowKey={'id'}/>\r\n     </Card>\r\n  )\r\n}\r\n"],"names":["getReqHospitalSet","page","limit","hosname","hoscode","request","params","postReqHospitalSetAdd","data","getReqOneHospitalSet","id","getReqUpdateHospitalSet","getReqDeleteHospitalSet","getReqBatchHospitalSet","ids","flag","HospitalSet","useState","list","setList","total","setTotal","pageSize","setpageSize","setIds","loading","setLoading","Form","form","setPage","navigate","useNavigate","fetch","getFieldsValue","result","records","useEffect","columns","title","render","_","loacd","index","width","align","dataIndex","size","type","icon","onClick","danger","fixed","layout","onFinish","onValuesChange","name","placeholder","htmlType","setFieldsValue","undefined","className","disabled","length","Modal","onOk","message","dataSource","scroll","x","rowSelection","onChange","selectedRowKeys","selectedRows","bordered","pagination","showSizeChanger","showQuickJumper","pageSizeOptions","showTotal","current","rowKey"],"sourceRoot":""}